<div class="profile-page" style="padding-top: 2rem;">
  <div class="container">    
    <div class="padding">
      <div class="user-profile row bd-highlight">
        <div class="p-3 bd-highlight col-md-6">
          <div class="profile-intro">
            <div class="profile-icon">
              <img [src]="profileIcon" alt="profileIcon">
            </div>
            <div class="profile-text">
              {{ user.name | uppercase }}
            </div>
          </div>
          <div class="user-detail">
            <div class="user-detail-placement">
              <div class="icon-style">
                <ion-icon name="person-outline" class="ion-icon-style" style="color: #FB6F3D;"></ion-icon>
              </div>
              <div style="margin-left: 1rem;">
                <h6 style="margin: 0; color: #32343E;">FULL NAME</h6>
                <div style="margin: 0; color: #6B6E82;">{{ user.name }}</div>
              </div>
            </div>
            <div class="user-detail-placement">
              <div class="icon-style">
                <ion-icon name="mail-outline" class="ion-icon-style" style="color: #413DFB;"></ion-icon>
              </div>
              <div style="margin-left: 1rem;">
                <h6 style="margin: 0; color: #32343E;">EMAIL</h6>
                <p style="margin: 0; color: #6B6E82;">{{ user.email }}</p>
              </div>
            </div>
            <div class="user-detail-placement">
              <div class="icon-style">
                <ion-icon name="call-outline" class="ion-icon-style" style="color: #369BFF;"></ion-icon>
              </div>
              <div style="margin-left: 1rem;">
                <h6 style="margin: 0; color: #32343E;">PHONE NUMBER</h6>
                <p style="margin: 0; color: #6B6E82;">{{ user.phoneNumber }}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="p-3 me-auto bd-highlight profile-edit col-md-6">
          <button class="edit-button profile-edit-btn" (click)="editUser()"><ion-icon name="create-outline" style="font-size: 20px;"></ion-icon><span style="margin-left: 0.5rem;">Edit Profile</span></button>
          <button class="logout-button logout-btn" (click)="userLogout()"><ion-icon name="exit-outline" style="font-size: 20px;"></ion-icon><span style="margin-left: 0.5rem;">Logout</span></button>
        </div>
      </div>
    </div>
    <!-- Desktop and Laptop View -->
    <div *ngIf="isDesktop">

      <div class="row padding">
        <div class="desktop-dashboard">
          <div class="dashboard-sidebar">
            <ul class="menu-list">
              <li
                style="margin-top: 1rem;"
                *ngFor="let item of menuItems"
                [class.active]="selectedMenu === item.id"
                (click)="selectMenu(item.id)"
              >
                <div style="margin-left: 1rem;justify-content: center;display: flex;align-items: center;">
                  <ion-icon [name]="item.icon" style="font-size: 20px;"></ion-icon> 
                </div>
                <div style="margin-left: 1rem;">
                  <span>{{ item.title | uppercase }}</span>
                </div>
              </li>
            </ul>
          </div>
          <div class="dashboard-content">
            <ng-container [ngSwitch]="selectedMenu">
              <div *ngSwitchCase="'orders'"><div><h3>{{"Orders" | uppercase}}</h3></div></div>
              <div *ngSwitchCase="'addresses'">
                <div>
                  <div class="manage-address">
                    <h3>{{"Manage Addresses" | uppercase}}</h3>
                    <button class="add-address" (click)="addNewAddress()"><ion-icon name="add-circle" style="font-size: 2rem; color: #FB6D3A; border-radius: 50%;"></ion-icon></button>
                  </div>
                  <div class="addresses">
                    <div class="address-card" *ngFor="let address of addresses">
                      <h4>{{ address?.title }}</h4>
                      <p>{{ address?.details }}</p>
                      <div class="actions">
                        <button class="edit"><mat-icon fontIcon="edit_note" class="edit"></mat-icon></button>
                        <button class="delete"><mat-icon fontIcon="delete_outline" class="delete"></mat-icon></button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngSwitchCase="'favorites'"><div><h3>{{"Favorites" | uppercase}}</h3></div></div>
              <div *ngSwitchCase="'payments'">
                <div>
                  <h3>{{"Payments" | uppercase}}</h3>
                  <div class="payment">
                    <h5 style="color: #2D2D2D;">Saved Cards</h5>
                    <div class="payments">
                      <ion-card class="payments-cards">
                        <ion-item class="custom-item">
                          <ion-thumbnail slot="start">
                            <img alt="Silhouette of mountains" src="https://ionicframework.com/docs/img/demos/thumbnail.svg" />
                          </ion-thumbnail>
                          <div>
                              <ion-card-title>Lksdjflsdfsjdlfk</ion-card-title>
                              <ion-card-subtitle>22/33</ion-card-subtitle>
                          </div>
                          <div slot="end">
                              <ion-button class="deleteSavedCards">Delete</ion-button>
                          </div>
                        </ion-item>
                      </ion-card>
                      <ion-card class="payments-cards">
                        <ion-item class="custom-item">
                          <ion-thumbnail slot="start">
                            <img alt="Silhouette of mountains" src="https://ionicframework.com/docs/img/demos/thumbnail.svg" />
                          </ion-thumbnail>
                          <div>
                            <ion-card-title>Card No.</ion-card-title>
                            <ion-card-subtitle>Card valid date</ion-card-subtitle>
                          </div>
                          <div slot="end">
                            <ion-button class="deleteSavedCards">Delete</ion-button>
                          </div>
                        </ion-item>
                      </ion-card>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngSwitchCase="'settings'"><div><h3>{{"Settings" | uppercase}}</h3></div></div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Mobile and Tablet View -->
    <div class="mobile-dashboard" *ngIf="!isDesktop">
      <mat-accordion>
        <mat-expansion-panel *ngFor="let item of menuItems">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <i [class]="item.icon"></i> {{ item.title }}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div>
            <ng-container [ngSwitch]="item.id">
              <div *ngSwitchCase="'orders'">Orders Content</div>
              <div *ngSwitchCase="'addresses'">
                <h3>Manage Addresses</h3>
                <div class="addresses">
                  <div class="address-card" *ngFor="let address of addresses">
                    <h4>{{ address.title }}</h4>
                    <p>{{ address.details }}</p>
                    <div class="actions">
                      <button class="edit"><mat-icon fontIcon="edit_note" class="edit"></mat-icon></button>
                      <button class="delete"><mat-icon fontIcon="delete_sweep" class="delete"></mat-icon></button>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngSwitchCase="'favorites'">Favorites Content</div>
              <div *ngSwitchCase="'payments'">Payments Content</div>
              <div *ngSwitchCase="'settings'">Settings Content</div>
              <div *ngSwitchCase="'logout'">Logout Content</div>
            </ng-container>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
</div>

<!-- Dialog Templates -->
<!-- Edit Profile Template -->
<ng-template #editProfileTemplate let-user="user">
  <div class="dialog-container">
    <form class="dialog-form">
      <mat-form-field appearance="outline" class="full-width" style="width: 100%;">
        <mat-label>Name</mat-label>
        <input matInput [(ngModel)]="user.name" name="name" required />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width" style="width: 100%;">
        <mat-label>Email</mat-label>
        <input matInput [(ngModel)]="user.email" name="email" type="email" required />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width" style="width: 100%;">
        <mat-label>Phone Number</mat-label>
        <input matInput [(ngModel)]="user.phoneNumber" name="phone" type="tel" required />
      </mat-form-field>
    </form>
  </div>
</ng-template>

<!-- Add Address Template -->
<ng-template #addAddressTemplate let-newAddress="newAddress">
  <div class="dialog-container">
    <form class="dialog-form">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Address Title</mat-label>
        <!-- <input matInput [(ngModel)]="newAddress.title" name="title" required /> -->
        <mat-select [(ngModel)]="newAddress.title" name="title" required>
          <mat-option value="Home">Home</mat-option>
          <mat-option value="Work">Work</mat-option>
          <mat-option value="Other">Other</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Address Details</mat-label>
        <textarea matInput [(ngModel)]="newAddress.details" name="details" rows="3" required></textarea>
      </mat-form-field>
    </form>
  </div>
</ng-template>

